@model neshanak.viewModel.AdminBlogVM
@{
    ViewBag.Title = "blog";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@section scripts{

    <script src="~/Scripts/tinymce/tinymce.min.js"></script>
    <script>
        tinymce.init({
            selector: 'textarea',
            height: 500,
            menubar: false,
            plugins: [
                'advlist autolink lists link image charmap print preview anchor',
                'searchreplace visualblocks code fullscreen',
                'insertdatetime media table paste code help wordcount'
            ],

            toolbar: 'undo redo | formatselect | ' +
                ' bold italic backcolor | alignleft aligncenter ' +
                ' alignright alignjustify | bullist numlist outdent indent |' +
                ' removeformat | help | link image',
            content_css: [
                '//fonts.googleapis.com/css?family=Lato:300,300i,400,400i',
                '//www.tiny.cloud/css/codepen.min.css'
            ]
        });
       
        //tinymce.activeEditor.execCommand('mceDirectionRTL');
    </script>
    <script>
        function makeid(length) {
            var result = '';
            var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var charactersLength = characters.length;
            for (var i = 0; i <length; i++) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }
    </script>

}



<style>
    .nav-tabs {
        padding-right: 0px;
    }

        .nav-tabs li {
            float: right !important;
        }

    .fieldholder {
        /*width: 30%;
            display: inline-block;*/
        padding: 15px;
    }

    .REM {
        border-radius: 5px;
    }
</style>
<div class="row" style="background-color:white; padding:10px; margin:0px; margin-top:65px">
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#home" style=" color: #8d8d8d; ">@Resources.res.blogList</a></li>
        <li><a data-toggle="tab" href="#menu1" style=" color: #8d8d8d; ">@Resources.res.newBlog</a></li>
        <li><a data-toggle="tab" href="#menu3" style=" color: #8d8d8d; ">@Resources.res.blogCatList</a></li>
        <li><a data-toggle="tab" href="#menu2" style=" color: #8d8d8d; ">@Resources.res.addBlogCat </a></li>

    </ul>

    <div class="tab-content">
        <div id="home" class="tab-pane fade in active" style="padding-top:20px">

            <div class="row" style="padding:20px">
                <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                    <label> @Resources.res.BlogCat</label>

                    @{
                        List<SelectListItem> listItems2 = new List<SelectListItem>();
                        if (Model.Commentlist.articles != null)
                        {

                            listItems2.Add(new SelectListItem
                            {
                                Text = Resources.res.all,
                                Value = "",
                                Selected = true
                            });

                            foreach (var item in Model.Commentlist.articles)
                            {
                                listItems2.Add(new SelectListItem
                                {
                                    Text = item.title,
                                    Value = item.ID.ToString()
                                });

                            }
                        }

                        <div class=" ">
                            <span style="color:red; display:none">*</span>

                            @Html.DropDownList("catListblog", listItems2, Resources.res.chooscat, new { id = "catListblog", name = "catList2", style = "", @class = "form-control" })
                        </div>
                    }



                </div>
                <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                    <div class=" ">
                        <span style="color:red; display:none">*</span>
                        <input class="form-control" style="min-width:250px" type="text" id="searchinput" name="searchinput" placeholder="@Resources.res.search" />
                    </div>
                </div>

                <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                    <a id="changeBlogList" class="lgnsubmitt btn btn-primary">@Resources.res.OK</a>

                </div>
                <script>
                    $("#changeBlogList").click(function () {
                        var search = $("#searchinput").val();
                        var cat = $("#catListblog option:selected").val();
                        $.ajax({
                            url: '/Admin/getNewListArticle',
                            dataType: 'html',
                            data: {
                                search: search,
                                cat: cat
                            },
                            success: function (data) {

                                $("#Listholder").html(data);
                            },
                            error: function () {

                            }
                        });

                    })
                </script>
                <div id="Listholder">
                    <div class="row" style="padding:20px">
                        <div style="overflow-x:auto;padding:10px">
                            <div class="panel panel-default">
                                <div class="panel-heading" style="    background-image: -webkit-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -o-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -webkit-gradient(linear,left top,left bottom,from(#2a85ae),to(#246388)) !important;
    background-image: linear-gradient(to bottom,#2a85ae 0,#246388 100%) !important;color: #fff">
                                    <h3 class="panel-title"><i class="fa fa-shopping-basket fa-fw"></i>@Resources.res.blogList </h3>
                                </div>
                                <div class="panel-body">
                                    <div id="morris-area-chart">
                                        <div style="overflow:auto">
                                            <table class="table table-bordered table-hover table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            ID
                                                        </th>
                                                        <th>
                                                            @Resources.res.title
                                                        </th>
                                                        <th>
                                                            @Resources.res.writer
                                                        </th>
                                                        <th>
                                                            @Resources.res.catnam
                                                        </th>
                                                        <th>
                                                            @Resources.res.date
                                                        </th>

                                                        <th>

                                                        </th>

                                                        <th>

                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @{
                                                        if (Model.Articlelist.articles != null)
                                                        {
                                                            foreach (var item in Model.Articlelist.articles)
                                                            {

                                                                <tr>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.ID)
                                                                    </td>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.title)
                                                                    </td>
                                                                    <td style=" text-align:right">
                                                                        @Html.DisplayFor(modelItem => item.writer)
                                                                    </td>

                                                                    <td style=" text-align:right">
                                                                        @Html.DisplayFor(modelItem => item.catName)
                                                                    </td>
                                                                    <td style="text-align: right;">
                                                                        @Html.DisplayFor(modelItem => item.date)

                                                                    </td>

                                                                    <td style="text-align: center;">

                                                                        @{
                                                                            var ID = @item.ID;
                                                                            <a id=@ID class="btn btn-primary PEbutton" style="  margin:5px ; cursor: pointer;  padding: 5px; color: #fff; border-radius: 5px;">@Resources.res.edit</a>

                                                                        }

                                                                    </td>
                                                                    <td style="text-align: center;">

                                                                        @{

                                                                            <a id=@ID class="btn btn-primary Dbutton" style="  margin:5px ; cursor: pointer;  padding: 5px; color: #fff; border-radius: 5px;">@Resources.res.delete</a>

                                                                        }

                                                                    </td>
                                                                </tr>
                                                            }

                                                        }
                                                    }


                                                </tbody>
                                            </table>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row" id="detailholder" style="padding:0 35px ; display:none; width:100%" >



                    @using (Html.BeginForm("updateArticle", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", id = "updateArticle" }))
                    {

                        <div style="padding: 15px 5px; border: 1px solid #d8d8d8; border-radius: 5px;">
                            <div class="row">




                                <div class="row fieldholder col-lg-3">
                                    <label> @Resources.res.catnam</label>

                                    @{
                                        List<SelectListItem> listItems = new List<SelectListItem>();
                                        if (Model.Commentlist.articles != null)
                                        {
                                            foreach (var item in Model.Commentlist.articles)
                                            {
                                                listItems.Add(new SelectListItem
                                                {
                                                    Text = item.title,
                                                    Value = item.ID.ToString()
                                                });

                                            }
                                        }


                                    }
                                    <div class=" ">
                                        <span style="color:red; display:none">*</span>

                                        @Html.DropDownList("catListupdate", listItems, Resources.res.chooscat, new { id = "catListupdate", name = "catList", style = "", @class = "form-control REM2" })
                                    </div>


                                </div>
                                <div class="row fieldholder col-lg-3">
                                    <label style="text-align: right">
                                        @Resources.res.title :
                                    </label>
                                    <div>
                                        <span style="color:red; display:none">*</span>
                                        <input value="" type="text" id="titleupdate" name="titleupdate" required="required" class="form-control">
                                    </div>


                                </div>
                                <div class="row fieldholder col-lg-3">

                                    <label style="text-align: right">
                                        @Resources.res.tags :
                                    </label>

                                    <div>
                                        <span style="color:red; display:none">*</span>
                                        <input data-role="tagsinput" id="tagupdate" name="tagupdate" required="required" class="form-control REM2" style="min-height:150px">
                                    </div>


                                </div>
                                <div class="row fieldholder col-lg-3">

                                    <label style="text-align: right">
                                        @Resources.res.image:
                                    </label>

                                    <div>
                                        <input type="file" id="imageFileHolderEdit" name="image" required="required" class="form-control ">
                                    </div>
                                </div>



                                <input id="IDupdate" name="IDupdate" hidden />
                                <input id="imageupdate" name="imageupdate" hidden />

                            </div>
                            <div id="thumbholderEdior">

                            </div>
                            <div class="row">
                                <div class="row fieldholder col-lg-12">
                                    <label style="text-align: right">
                                        @Resources.res.content :
                                    </label>
                                    <div>
                                        <span style="color:red; display:none">*</span>

                                        <textarea id="descriptionupdate" name="descriptionupdate" required="required" class="form-control " style="min-height:150px"></textarea>

                                    </div>


                                </div>
                                <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                                    <a id="UpdateButt" class="lgnsubmitt btn btn-primary">@Resources.res.OK</a>

                                </div>
                            </div>
                            <script>


                                $("#UpdateButt").click(function () {
                                    // alert("aa");

                                    var int = 0;
                                    $(".REM2").each(function () {

                                        if ($(this).val() === "") {
                                            $(this).siblings("span").css("display", "inline-block");
                                            int = 1;
                                        }
                                    })
                                    if (int === 0) {
                                        $("#updateArticle").submit();
                                    }
                                    else {
                                        toastr.options = {
                                            "debug": false,
                                            "positionClass": "toast-top-center",
                                            "onclick": null,
                                            "fadeIn": 300,
                                            "fadeOut": 1000,
                                            "timeOut": 5000,
                                            "extendedTimeOut": 1000
                                        }
                                        toastr.error('@Resources.res.completeAll')

                                    }


                                })
                            </script>
                            <script language="javascript" type="text/javascript">

                            $("#imageFileHolderEdit").on('change', function () {

                       // $("#dvPreview").html("");
                        var input = this;
                        if (input.files && input.files[0]) {

                                            var formData = new FormData();
                            formData.append('blob', input.files[0]);
                            formData.append('filename', 'edit');

                                            var MyAppUrlSettings = {
                                                MyUsefulUrl: '@Url.Action("GetImageForMCEEditUpload", "admin")'
                                            }

                                            var request = new XMLHttpRequest();
                                            request.open('POST', MyAppUrlSettings.MyUsefulUrl);
                                            request.send(formData);
                                            request.onreadystatechange = function() {
                                                if (request.readyState == 4 && request.status == 200)
                                                {
                                                                                      $('#thumbholderEdior').append(request.responseText);
                                                                                        $("#main-cropper").css("display", "none");
                                                                                        $("#loading").css("display", "none");


                                                }
                                                }
                        }
                        else {
                            alert("s")
                        }

                    });
                            </script>
                        </div>

                    }


                </div>
                <div class="modal fade" id="delArticlemodal" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">

                            <div class="modal-body">
                                <p>@Resources.res.delbusi</p>

                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="modalDelArticle">@Resources.res.OK</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">@Resources.res.cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
                <script>
                    //tinymce.get('descriptionupdate').setContent("aaa");
                    //alert("aa");
                </script>
                <script>
                 
                    var id = ""
                    $(".PEbutton").click(function () {
                        //tinymce.get('descriptionupdate').setContent("aaa");
                        var rowid = $(this).attr("id");
                        var articles = @Html.Raw(Json.Encode(Model.Articlelist.articles));
                        $("#detailholder").css("display", "inline-block");

                        $.each(articles, function (index, item) {
                            if (item.ID.toString() === rowid) {

                                $("#catListupdate option").each(function () {
                                    if ($(this).text() === item.catName) {
                                        $(this).attr("selected", "selected");
                                    }
                                })

                                var imagaddress = "/images/panelimages/" + item.image;
                                $("#titleupdate").val(item.title);
                                $("#IDupdate").val(item.ID);
                                $("#imageupdate").val(item.image);
                               // $("#descriptionupdate").val();


                                var hashtags = item.hashtags;
                                var res = hashtags.split("-");
                                $('input[name=tagupdate]').tagsinput('removeAll');
                                $.each(res, function (i) {
                                    $('input[name=tagupdate]').tagsinput('add', res[i]);
                                });


                                tinymce.get('descriptionupdate').setContent(item.content);
                                

                                let srt = item.content;
                                html = $.parseHTML(srt);
                                var $response = $(html);

                                var $links = $response.find('img');
                                var value = "";
                                $links.each(function (index, $link) {
                                    value = value + $(this).attr('src') + ",";
                                });



                                $.ajax({
                                    url: '/Admin/GetImageForMCEEditContext',
                                    dataType: 'html',
                                    data: {
                                        srt: value,
                                        image: $("#imageupdate").val()
                                    },
                                    success: function (data) {
                                        $('#thumbholderEdior').html(data);
                                    },
                                    error: function () {

                                    }
                                });




                            }


                        });

                    });
                    $(".Dbutton").click(function () {
                        $("#delArticlemodal").modal('toggle');
                        id = $(this).attr("id");


                    })
                    $("#modalDelArticle").click(function () {
                        $.ajax({
                            url: '/Admin/DeleteArticle',
                            dataType: 'html',
                            data: {
                                id: id,
                            },
                            success: function (data) {
                                window.location.reload();
                            },
                            error: function () {

                            }
                        });
                    })
                </script>

            </div>




        </div>
        <div id="menu1" class="tab-pane fade" style="padding-top:20px">
            @using (Html.BeginForm("setNewArticle", "Admin", FormMethod.Post,
new { enctype = "multipart/form-data", id = "addArticle" }))
            {


                <div class="row" style="padding:20px">


                    <div class="row fieldholder col-lg-3">
                        <label> @Resources.res.cat</label>

                        @{
                            List<SelectListItem> listItems = new List<SelectListItem>();
                            if (Model.Commentlist.articles != null)
                            {
                                foreach (var item in Model.Commentlist.articles)
                                {
                                    listItems.Add(new SelectListItem
                                    {
                                        Text = item.title,
                                        Value = item.ID.ToString()
                                    });

                                }
                            }


                        }
                        <div class=" ">
                            <span style="color:red; display:none">*</span>
                            @Html.DropDownList("catList", listItems, Resources.res.chooscat, new { id = "catList", name = "catList", style = "", @class = "form-control REM" })
                        </div>


                    </div>
                    <div class="row fieldholder col-lg-3">
                        <label style="text-align: right">
                            @Resources.res.title :
                        </label>
                        <div>
                            <span style="color:red; display:none">*</span>

                            <input value="" type="text" id="title" name="title" required="required" class="form-control  REM">
                        </div>


                    </div>
                    <div class="row fieldholder col-lg-3" style="min-height:70px">

                        <label style="text-align: right">
                            @Resources.res.tags :
                        </label>

                        <div>
                            <span style="color:red; display:none">*</span>
                            <input data-role="tagsinput" id="tag" name="tag" required="required" class="form-control REM">
                        </div>


                    </div>
                    <div class="row fieldholder col-lg-3">
                        <div style="width:70%;display:inline-block">
                            <label style="text-align: right">
                                @Resources.res.image:
                            </label>

                            <div>

                                <input multiple type="file" id="imageFileHolder" name="image" required="required" class="form-control ">
                            </div>
                        </div>





                    </div>

                </div>
                <div id="thumbholder">

                </div>
                <div class="row" style="padding:10px">
                    <div class="row fieldholder col-lg-12">
                        <label style="text-align: right">
                            @Resources.res.content :
                        </label>
                        <div>
                            <span style="color:red; display:none">*</span>

                            <textarea id="description" name="description" required="required" class="form-control"></textarea>

                        </div>


                    </div>


                    <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                        <a id="CRprocuct" class="lgnsubmitt btn btn-primary">@Resources.res.OK</a>

                    </div>


                </div>
              


                <script>




                    $("#CRprocuct").click(function () {
                        $(this).siblings("span").css("display", "none");
                        var addint = 0;
                        $(".REM").each(function () {
                           
                            if ($(this).val() === "") {
                                $(this).siblings("span").css("display", "inline-block");
                                addint = 1;
                            }




                        })
                        if (addint === 0) {
                            $("#addArticle").submit();
                        }
                        else {
                            toastr.options = {
                                "debug": false,
                                "positionClass": "toast-top-center",
                                "onclick": null,
                                "fadeIn": 300,
                                "fadeOut": 1000,
                                "timeOut": 5000,
                                "extendedTimeOut": 1000
                            }
                            toastr.error('@Resources.res.completeAll')

                        }


                    })
                </script>
                <script language="javascript" type="text/javascript">

                    $("#imageFileHolder").on('change', function () {

                       // $("#dvPreview").html("");
                        var input = this;
                        if (input.files && input.files[0]) {

                                            var formData = new FormData();
                            formData.append('blob', input.files[0]);
                            formData.append('filename', 'add');
                                            var MyAppUrlSettings = {
                                                MyUsefulUrl: '@Url.Action("GetImageForMCE", "admin")'
                                            }

                                            var request = new XMLHttpRequest();
                                            request.open('POST', MyAppUrlSettings.MyUsefulUrl);
                                            request.send(formData);
                                            request.onreadystatechange = function() {
                                                if (request.readyState == 4 && request.status == 200)
                                                {
                                                                                        $('#thumbholder').html(request.responseText);
                                                                                        $("#main-cropper").css("display", "none");
                                                                                        $("#loading").css("display", "none");


                                                }
                                                }
                        }
                        else {
                            alert("s")
                        }

                    });
                </script>


            }
        </div>
        <div id="menu2" class="tab-pane fade" style="padding-top:20px">
            @using (Html.BeginForm("setNewCatArticle", "Admin", FormMethod.Post,
new { enctype = "multipart/form-data", id = "addcatArticle" }))
            {


                <div class="row" style="padding:20px">



                    <div class=" fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                        <label style="text-align: right">
                            @Resources.res.title :
                        </label>
                        <div>
                            <span class="star" style="color:red; display:none">*</span>

                            <input value="" type="text" id="title" name="title" required="required" class="form-control  REM3">
                        </div>






                    </div>

                    <div class=" fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">

                        <label style="text-align: right">
                            @Resources.res.image:
                        </label>

                        <div>
                            <span class="star" style="color:red; display:none">*</span>
                            <input type="file" id="image" name="image" required="required" class="form-control">
                        </div>


                    </div>

                    <div class="row fieldholder" style="margin-top:35px; width:25%;padding: 0 10px;display: inline-block;">
                        <a id="setCatTitle" class="lgnsubmitt btn btn-primary">@Resources.res.OK</a>
                    </div>


                </div>
                <script>




                    $("#setCatTitle").click(function () {

                        $(".star").hide();
                        var int = 0;
                        $(".REM3").each(function () {

                            if ($(this).val() === "") {
                                $(this).siblings("span").css("display", "inline-block");
                                int = 1;
                            }




                        })
                        if (int === 0) {

                            $("#addcatArticle").submit();
                        }
                        else {
                            toastr.options = {
                                "debug": false,
                                "positionClass": "toast-top-center",
                                "onclick": null,
                                "fadeIn": 300,
                                "fadeOut": 1000,
                                "timeOut": 5000,
                                "extendedTimeOut": 1000
                            }
                            toastr.error('@Resources.res.completeAll')

                        }


                    })
                </script>


            }




        </div>
        <div id="menu3" class="tab-pane fade" style="padding-top:20px">
            <div style="padding:20px">
                <div id="Listholder">
                    <div class="row" style="padding:20px">
                        <div style="overflow-x:auto;padding:10px">
                            <div class="panel panel-default">
                                <div class="panel-heading" style="    background-image: -webkit-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -o-linear-gradient(top,#2a85ae 0,#246388 100%) !important;
    background-image: -webkit-gradient(linear,left top,left bottom,from(#2a85ae),to(#246388)) !important;
    background-image: linear-gradient(to bottom,#2a85ae 0,#246388 100%) !important;color: #fff">
                                    <h3 class="panel-title"><i class="fa fa-shopping-basket fa-fw"></i>لیست سرفصل ها  </h3>
                                </div>
                                <div class="panel-body">
                                    <div id="morris-area-chart">
                                        <div style="overflow:auto">
                                            <table class="table table-bordered table-hover table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>
                                                            ID
                                                        </th>
                                                        <th>
                                                            @Resources.res.title
                                                        </th>


                                                        <th>

                                                        </th>

                                                        <th>

                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @{
                                                        if (Model.Commentlist.articles != null)
                                                        {
                                                            foreach (var item in Model.Commentlist.articles)
                                                            {

                                                                <tr>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.ID)
                                                                    </td>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.title)
                                                                    </td>


                                                                    <td style="text-align: center;">

                                                                        @{
                                                                            var ID = @item.ID;
                                                                            <a id=@ID class="btn btn-primary CPbutton" style="  margin:5px ; cursor: pointer;  padding: 5px; color: #fff; border-radius: 5px;">@Resources.res.edit</a>

                                                                        }

                                                                    </td>
                                                                    <td style="text-align: center;">

                                                                        @{

                                                                        <a id=@ID class="btn btn-primary CDbutton" style="  margin:5px ; cursor: pointer;  padding: 5px; color: #fff; border-radius: 5px;">@Resources.res.delete</a>

                                                                        }

                                                                    </td>
                                                                </tr>
                                                            }

                                                        }
                                                    }


                                                </tbody>
                                            </table>
                                            <script>

                                            </script>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" id="catDetailHolder" style="padding:0 20px ; display:none; width:100%">



                @using (Html.BeginForm("updateCArticle", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", id = "updateCArticle" }))
                {

                    <div style="padding: 25px; border: 1px solid #d8d8d8; border-radius: 5px;">
                        <div class="row">

                            <div class="row fieldholder col-lg-3">
                                <label style="text-align: right">
                                    @Resources.res.title :
                                </label>
                                <div>
                                    <span style="color:red; display:none">*</span>
                                    <input value="" type="text" id="Ctitleupdate" name="Ctitleupdate" required="required" class="form-control REM4">
                                </div>


                            </div>

                            <div class="row fieldholder col-lg-3">

                                <label style="text-align: right">
                                    @Resources.res.image:
                                </label>

                                <div>

                                    <input type="file" id="Cimage" name="Cimage" required="required" class="form-control ">
                                </div>


                            </div>
                            <img id="CarticleImage" style="max-height:150px" />


                            <input id="CIDupdate" name="CIDupdate" hidden />
                            <input id="Cimageupdate" name="Cimageupdate" hidden />

                        </div>
                        <div class="row">

                            <div class="row fieldholder" style="width:25%;padding: 0 10px;display: inline-block;">
                                <a id="UpdateCButt" class="lgnsubmitt btn btn-primary">@Resources.res.OK</a>

                            </div>
                        </div>

                    </div>

                }




            </div>
            <div class="modal fade" id="delCArticle" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">

                        <div class="modal-body">
                            <p>@Resources.res.delbusi</p>

                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" id="modalDelCArticle">@Resources.res.OK</button>
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">@Resources.res.cancel</button>
                               </div>
                    </div>
                </div>
            </div>

            <script>
              var id = "";
                $(".CDbutton").click(function () {
                    $("#delCArticle").modal('toggle');
                    id = $(this).attr("id");
                });
                $(".CPbutton").click(function () {
                    var rowid = $(this).attr("id");
                    var articles = @Html.Raw(Json.Encode(Model.Commentlist.articles));
                    $("#catDetailHolder").css("display", "inline-block");

                    $.each(articles, function (index, item) {
                        if (item.ID.toString() === rowid) {



                            var imagaddress = "/images/panelimages/" + item.image;

                            $("#Ctitleupdate").val(item.title);
                            $("#CarticleImage").attr("src", imagaddress);
                            $("#CIDupdate").val(item.ID);
                            $("#Cimageupdate").val(item.imagaddress);



                        }


                    });

                });

                $("#modalDelCArticle").click(function () {




                    $.ajax({
                        url: '/Admin/DeleteCArticle',
                        dataType: 'html',
                        data: {
                            id: id,
                        },
                        success: function (data) {

                            window.location.reload();
                        },
                        error: function () {

                        }
                    });
                });

                $("#UpdateCButt").click(function () {
                    // alert("aa");

                    var int = 0;
                    $(".REM4").each(function () {

                        if ($(this).val() === "") {
                            $(this).siblings("span").css("display", "inline-block");
                            int = 1;
                        }
                    })
                    if (int === 0) {
                        $("#updateCArticle").submit();
                    }
                    else {
                        toastr.options = {
                            "debug": false,
                            "positionClass": "toast-top-center",
                            "onclick": null,
                            "fadeIn": 300,
                            "fadeOut": 1000,
                            "timeOut": 5000,
                            "extendedTimeOut": 1000
                        }
                        toastr.error('@Resources.res.completeAll')

                    }


                });

            </script>


        </div>
    </div>
</div>






