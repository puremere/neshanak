@model AdminPanel.ViewModel.CatPageviewModel

@{
    
    if (Model.Cats.Count() == 0)
    {
        
    }
    else
    {
         if (Model.levelfinder == "def")
    {
        <label class="control-label component ">
            منو 2 :
        </label>
        <div class="component">
            @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistlevel2", style = "width:100%; min-width:185px", onchange = "setglobalsubcatid(subcatslist)" })
        </div>
        @*<script>

            $("#subcatslistlevel2").change(function () {
                var selectedValue = subcatslistlevel2.value;
                var sentitem = "2" + subcatslistlevel2.value;
                $.ajax({
                    url: '/Admin/getsubcatlist2',
                    dataType: 'html',
                    data: {
                        catid: selectedValue,
                        levelfinder: "def"

                    },
                    success: function (data) {
                       
                        $('#subcat2holderfordef').html(data);
                        $.ajax({
                            url: '/Admin/bringFilterForProductSet',
                            dataType: 'html',
                            data: {
                                catid: sentitem
                            },
                            success: function (data) {

                                $('#filterholderforproduct').html(data);

                            },
                            error: function () {
                                alert("error")
                            }
                        });

                    },
                    error: function () {
                        alert("error")
                    }
                });
            })


        </script>*@
    <div id="subcat2holderfordef" class="component">

    </div>
    }
         else if (Model.levelfinder == "chg")
         {
             if (Model.layer == "2")
             {
            <label class="control-label component ">
                منو 2 :
            </label>
            <div class="component">
                @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistforchangelevel2", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
            </div>
        }
        if (Model.layer == "3")
        {
            <label class="control-label component ">
                منو 2 :
            </label>
            <div class="component">
                @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistforchangelevel2", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
            </div>
            <script>


                $("#subcatslistforchangelevel2").change(function () {
                    var selectedValue = this.value;

                    $.ajax({
                        url: '/Admin/getsubcatlist2',
                        dataType: 'html',
                        data: {
                            catid: selectedValue,
                            levelfinder: "chg"
                        },
                        success: function (data) {


                            $('#subcat2holderforedit').html(data);
                        },
                        error: function () {

                        }
                    });

                })



            </script>
            <div id="subcat2holderforedit" class="component">

            </div>
        }


    }
    else if (Model.levelfinder == "del")
    {

        if (Model.layer == "2")
        {
            <label class="control-label component ">
                منو 2 :
            </label>
            <div class="component">
                @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistfordeletelevel2", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
            </div>
        }
        else if (Model.layer == "3")
        {
            <label class="control-label component ">
                منو 2 :
            </label>
            <div class="component">
                @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistfordeletelevel2", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
            </div>
            <script>

                $("#subcatslistfordeletelevel2").change(function () {
                    var selectedValue = this.value;

                    $.ajax({
                        url: '/Admin/getsubcatlist2',
                        dataType: 'html',
                        data: {
                            catid: selectedValue,
                            levelfinder: "del"

                        },
                        success: function (data) {


                            $('#subcat2holderforedelete').html(data);
                        },
                        error: function () {

                        }
                    });


                })



            </script>
            <div id="subcat2holderforedelete" class="component">

            </div>
        }

    }
    else if (Model.levelfinder == "list")
    {

        <label class="control-label component ">
            منو 2 :
        </label>
        <div class="component">
            @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistfordeletelevel2", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
        </div>
        <script>

            $("#subcatslistfordeletelevel2").change(function () {
                var selectedValue = this.value;

                $.ajax({
                    url: '/Admin/getsubcatlist2',
                    dataType: 'html',
                    data: {
                        catid: selectedValue,
                        levelfinder: "list"

                    },
                    success: function (data) {

                        $('#subcat2holderforlist').html(data);

                    },
                    error: function () {

                    }
                });


            })



        </script>
        <div id="subcat2holderforlist" class="component">

        </div>
    }
    }
    
   
}








